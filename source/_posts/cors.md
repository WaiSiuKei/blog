---
title: 从上周遇到的 CORS 问题说起
date: 2019-10-20 15:38:47
tags: 随笔
---
数了一下，已经有两个月没写了，这份工作入职后就在忙着工作的事情和自己的 Side Project, 所以之前那种为了写而写的文章，就没有太多愿望去写。但是在上周工作中，遇到一些事情，还是想记录一下。

我上周在做一些 URL 迁移的工作，就是把前端页面的地址从`a.b.com`改成`b.com/a`, 代码改动也算顺利；但是这个改动会涉及公司的其他系统，所以有一些跨团队协调配合的工作。其中，和某团队的同事干脆面（化名）的合作，是令我比较尴尬的。

在公司，有三套环境可以用来发布上线，测试、预发、生产。我在一开始，就把这次需要的改动写下来，告诉其他同事如何配合。这位干脆面在测试环境的改动也算顺利，不过发现了一个不是由于这次改动产生的 400 错误，本着负责任的态度，我也积极配合解决问题。这个问题呢，我那边也能复现，然后一顿操作完，又没了，我们双方都没能再次重现，然后把它当作后端问题没管。

到了预发环境，这个问题还是存在，而且因为干脆面访问我们页面没有使用 https，我硬编码了请求的 BaseURL 出现了 CORS 问题，然后他就语气急了。

我刚开始时没想到是 Https , 被追问后没有想到原因，所以感到压力。我现在相当于 Remote 工作，算是一个可有可无的边缘角色，内心是有点慌的。然后就不加辨别地找了其他同事，问了些低级问题。

冷静下来后，我重新看了一下 W3C 的文档， [https://www.w3.org/TR/cors/#resource-preflight-requests](https://www.w3.org/TR/cors/#resource-preflight-requests), 发现我对 CORS 还停留在水过鸭背的阶段，遇到问题就忘了背过的知识点，对自己有点失望。

不过工作还得继续，总结经验让以后的路更好走吧：

- 别被同事的情绪影响
- 遇到问题先分析，别急着回复，宁愿慢也不要出错
- 继续深入研究，做个可靠的专家